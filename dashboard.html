<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:'Cairo',sans-serif}
body{background:#f4f7f6;color:#333}
header{background:#0b5fa5;color:#fff;padding:20px;text-align:center;font-size:24px;font-weight:bold}
.container{max-width:1100px;margin:auto;padding:20px}
.card{background:#fff;padding:20px;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,0.1);margin-bottom:30px}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ddd;padding:8px;text-align:center}
th{background:#0b5fa5;color:#fff}
button{padding:6px 12px;border:none;border-radius:8px;cursor:pointer}
.btn-delete{background:#f44336;color:#fff}
.invoice th{background:#0fa36b}
.invoice tfoot td{background:#6bcf63;color:#fff}
</style>
</head>
<body>

<header>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ø³Ù„Ø© ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©</header>

<div class="container">

<h2>ğŸ›’ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ø³Ù„Ø©</h2>
<div class="card">
<table id="productsTable">
<thead>
<tr>
<th>Ø§Ù„Ù…Ù†ØªØ¬</th>
<th>Ø§Ù„Ø³Ø¹Ø±/ÙƒØº</th>
<th>Ø§Ù„ÙƒÙ…ÙŠØ© (ÙƒØº)</th>
<th>Ø¥Ø¬Ø±Ø§Ø¡</th>
</tr>
</thead>
<tbody></tbody>
</table>
</div>

<h2>ğŸ“Š ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„</h2>
<div class="card">
<table class="invoice" id="invoiceTable">
<thead>
<tr>
<th>Ø§Ù„Ù…Ù†ØªØ¬</th>
<th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
<th>Ø§Ù„Ø³Ø¹Ø±</th>
<th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</th>
</tr>
</thead>
<tbody></tbody>
<tfoot>
<tr>
<td colspan="3"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</strong></td>
<td id="totalAmount">0 Ø¯.Ø£</td>
</tr>
</tfoot>
</table>
</div>

</div>

<script>

// Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ø³Ù„Ø© Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
function getCart(){
  return JSON.parse(localStorage.getItem("cart")) || [];
}

// Ø­ÙØ¸ Ø§Ù„Ø³Ù„Ø©
function saveCart(cart){
  localStorage.setItem("cart", JSON.stringify(cart));
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¬Ø¯ÙˆÙ„ ÙˆØ§Ù„ÙØ§ØªÙˆØ±Ø©
function render(){
  const cart = getCart();
  const tbody = document.querySelector("#productsTable tbody");
  const invoiceBody = document.querySelector("#invoiceTable tbody");

  tbody.innerHTML="";
  invoiceBody.innerHTML="";
  let total = 0;

  cart.forEach((item,index)=>{

    // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    tbody.innerHTML += `
      <tr>
        <td>${item.name}</td>
        <td>${item.price}</td>
        <td>${item.quantity}</td>
        <td>
          <button class="btn-delete" onclick="deleteItem(${index})">ğŸ—‘ Ø­Ø°Ù</button>
        </td>
      </tr>
    `;

    // Ø§Ù„ÙØ§ØªÙˆØ±Ø©
    const itemTotal = (item.price * item.quantity).toFixed(2);
    total += parseFloat(itemTotal);

    invoiceBody.innerHTML += `
      <tr>
        <td>${item.name}</td>
        <td>${item.quantity}</td>
        <td>${item.price}</td>
        <td>${itemTotal}</td>
      </tr>
    `;
  });

  document.getElementById("totalAmount").innerHTML = total.toFixed(2) + " Ø¯.Ø£";
}

// Ø­Ø°Ù Ù…Ù†ØªØ¬
function deleteItem(index){
  let cart = getCart();
  cart.splice(index,1);
  saveCart(cart);
  render();
}

// ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
render();

// ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ø°Ø§ ØªØºÙŠØ±Øª Ø§Ù„Ø³Ù„Ø© Ù…Ù† ØµÙØ­Ø© Ø«Ø§Ù†ÙŠØ©
window.addEventListener("storage", render);

</script>

</body>
</html>
