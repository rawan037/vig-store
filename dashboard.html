<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…ØªØ¬Ø±</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; margin:0; padding:0; font-family:'Cairo',sans-serif; }
    body { background:#f4f7f6; color:#333; }
    header { background:#0b5fa5; color:#fff; padding:20px; text-align:center; font-size:24px; font-weight:bold; }
    .container { max-width:1200px; margin:auto; padding:20px; }
    h2 { margin:20px 0 10px; color:#0b5fa5; }
    .card { background:#fff; padding:20px; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.1); margin-bottom:30px; }
    table { width:100%; border-collapse: collapse; margin-top:10px; }
    th, td { border:1px solid #ddd; padding:8px; text-align:center; }
    th { background:#0b5fa5; color:#fff; }
    button { padding:5px 10px; border:none; border-radius:8px; cursor:pointer; }
    .btn-edit { background:#4caf50; color:#fff; }
    .btn-delete { background:#f44336; color:#fff; }
    .btn-add { background:#0b5fa5; color:#fff; margin-top:10px; display:inline-block; }
    .invoice { width:100%; border-collapse: collapse; margin-top:15px; font-size:14px; text-align:center; }
    .invoice th, .invoice td { border:1px solid #0fa36b; padding:8px; }
    .invoice th { background-color:#0fa36b; color:#fff; }
    .invoice tfoot td { background-color:#6bcf63; color:#fff; }
    td.clickable { cursor:pointer; color:#0b5fa5; text-decoration:underline; }
  </style>
</head>
<body>

<header>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… ÙƒØ§Ù…Ù„Ø©</header>
<div class="container">

  <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª -->
  <h2>ğŸ“¦ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
  <div class="card">
    <table id="ordersTable">
      <thead>
        <tr>
          <th>Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨</th>
          <th>Ø§Ù„Ø¹Ù…ÙŠÙ„</th>
          <th>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</th>
          <th>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ (Ø¯.Ø£)</th>
          <th>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</th>
          <th>Ø§Ù„Ø­Ø§Ù„Ø©</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <button class="btn-add" onclick="addOrder()">â• Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠ</button>
  </div>

  <!-- Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
  <h2>ğŸ›’ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
  <div class="card">
    <table id="productsTable">
      <thead>
        <tr>
          <th>Ø§Ù„ØµÙˆØ±Ø©</th>
          <th>Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬</th>
          <th>Ø§Ù„Ø³Ø¹Ø±/ÙƒØº (Ø¯.Ø£)</th>
          <th>Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><img src="images/Ø¨Ù†Ø¯ÙˆØ±Ù‡.jpg" width="50"></td>
          <td>Ø¨Ù†Ø¯ÙˆØ±Ø©</td>
          <td>0.80</td>
          <td>
            <button class="btn-edit">âœ ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="btn-delete">ğŸ—‘ Ø­Ø°Ù</button>
          </td>
        </tr>
        <tr>
          <td><img src="images/ØªÙØ§Ø­.jpg" width="50"></td>
          <td>ØªÙØ§Ø­</td>
          <td>1.20</td>
          <td>
            <button class="btn-edit">âœ ØªØ¹Ø¯ÙŠÙ„</button>
            <button class="btn-delete">ğŸ—‘ Ø­Ø°Ù</button>
          </td>
        </tr>
      </tbody>
    </table>
    <button class="btn-add" onclick="alert('Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯')">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬</button>
  </div>

  <!-- ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ -->
  <h2>ğŸ“Š ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„</h2>
  <div class="card">
    <h3>ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„</h3>
    <table class="invoice" id="invoiceTable">
      <thead>
        <tr>
          <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
          <th>Ø§Ù„ÙƒÙ…ÙŠØ© (ÙƒØº)</th>
          <th>Ø§Ù„Ø³Ø¹Ø±/ÙƒØº (Ø¯.Ø£)</th>
          <th>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø¯.Ø£)</th>
        </tr>
      </thead>
      <tbody></tbody>
      <tfoot>
        <tr>
          <td colspan="3"><strong>Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ</strong></td>
          <td id="totalAmount"><strong>0 Ø¯.Ø£</strong></td>
        </tr>
      </tfoot>
    </table>
  </div>

</div>

<script>
let orders = [];
let orderCounter = 1;

// Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø§Ù„ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù…Ø¹ Ø§Ù„Ø³Ø¹Ø± Ù„ÙƒÙ„ ÙƒÙŠÙ„Ùˆ
const productsData = [
  { name:"Ø¨Ù†Ø¯ÙˆØ±Ø©", price:0.80 },
  { name:"ØªÙØ§Ø­", price:1.20 },
  { name:"Ø®ÙŠØ§Ø±", price:1.00 },
  { name:"ÙÙ„ÙÙ„", price:2.00 }
];

// Ø¥Ø¶Ø§ÙØ© Ø·Ù„Ø¨ ØªØ¬Ø±ÙŠØ¨ÙŠ
function addOrder() {
  const selectedProducts = [];
  const count = Math.floor(Math.random()*3)+1;
  for(let i=0;i<count;i++){
    const p = productsData[Math.floor(Math.random()*productsData.length)];
    selectedProducts.push({...p, quantity:(Math.random()*2+1).toFixed(2)});
  }

  const total = selectedProducts.reduce((sum,p)=>sum + p.quantity*p.price,0).toFixed(2);

  const order = {
    id: orderCounter++,
    customer: "Ø¹Ù…ÙŠÙ„ ØªØ¬Ø±ÙŠØ¨ÙŠ",
    products: selectedProducts,
    total: total,
    payment: Math.random()>0.5 ? "Ø§Ù„Ø¯ÙØ¹ Ø¹Ù†Ø¯ Ø§Ù„Ø§Ø³ØªÙ„Ø§Ù…" : "Ø§Ù„Ø¯ÙØ¹ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",
    status: "Ø¬Ø¯ÙŠØ¯"
  };

  orders.push(order);
  updateOrdersTable();
}

// ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨Ø§Øª
function updateOrdersTable() {
  const tbody = document.querySelector("#ordersTable tbody");
  tbody.innerHTML = "";
  orders.forEach(o=>{
    tbody.innerHTML += `
      <tr>
        <td class="clickable" onclick="showInvoice(${o.id})">${o.id}</td>
        <td>${o.customer}</td>
        <td>${o.products.map(p=>p.name).join(", ")}</td>
        <td>${o.total}</td>
        <td>${o.payment}</td>
        <td>${o.status}</td>
        <td>
          <button class="btn-edit" onclick="editOrder(${o.id})">âœ ØªØ¹Ø¯ÙŠÙ„</button>
          <button class="btn-delete" onclick="deleteOrder(${o.id})">ğŸ—‘ Ø­Ø°Ù</button>
        </td>
      </tr>
    `;
  });
}

function editOrder(id){ alert("ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨ #" + id); }
function deleteOrder(id){
  orders = orders.filter(o=>o.id!==id);
  updateOrdersTable();
}

// --- Ø¹Ø±Ø¶ ÙØ§ØªÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ø·Ù„Ø¨ ---
function showInvoice(orderId){
  const order = orders.find(o=>o.id===orderId);
  if(!order) return;

  const tbody = document.querySelector("#invoiceTable tbody");
  tbody.innerHTML = "";

  let total = 0;
  order.products.forEach(item=>{
    const row = document.createElement("tr");
    const totalPrice = (item.quantity*item.price).toFixed(2);
    total += parseFloat(totalPrice);
    row.innerHTML = `
      <td>${item.name}</td>
      <td>${item.quantity}</td>
      <td>${item.price.toFixed(2)}</td>
      <td>${totalPrice}</td>
    `;
    tbody.appendChild(row);
  });

  document.getElementById("totalAmount").innerHTML = `<strong>${total.toFixed(2)} Ø¯.Ø£</strong>`;
}

// Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©: ÙØ§ØªÙˆØ±Ø© ÙØ§Ø±ØºØ©
showInvoice(0);
</script>

</body>
</html>
